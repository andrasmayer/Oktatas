<input id="kereso">
<div id="content"  style="width:200px;margin:0 auto;"></div>


<script>




function Ajax(obj) {
    /*
    method      :   get/post
    url         :    hívás címe
    data        : beküldött adatok / JSON preferált,
    response    :   json, vagy elhagyható
    */
    if(obj.data == null){   obj.data = {} }
    let data = null
    var httpRequest = new XMLHttpRequest() 
    httpRequest.onreadystatechange = (e)=>{
        if(e.target.readyState ==4){
            data = obj.response == "json" ? JSON.parse(e.target.response) : e.target.response
        }
    }
    
    let input = ""
    Object.keys(obj.data).forEach((key,index)=>{
        input += `${key}=${obj.data[key]}`
        if(  index < Object.keys(obj.data).length-1){
            input += "&"
        }
    })
   

    let prefix = ""
    if( obj.method == "get"){ prefix = `?${input}` }
    
    httpRequest.open(obj.method, `${obj.url}${prefix}`, false)
    httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded")
    httpRequest.send(input)
    return data
} 



const kereso = document.getElementById("kereso")
const content = document.getElementById("content")

kereso.addEventListener("keyup",(event)=>{
   /// if(event.target.value.length >= 3){
        const res = Ajax({
            url:"./data.php",
            //method:"post",
            method:"get",
            response:"json",
            data:{username:event.target.value}
        }) 




        let context = ``
        res.data.forEach(itm=>{
            context += `<div>${itm.username} ${itm.job_title}</div>`
        })




        content.innerHTML = `
            <div style="border-bottom:1px solid silver">
                <b>Total:</b> ${res.total}    
            </div>

            <div style="padding-top:1rem;padding-bottom:1rem;">
                <div>
                    <b>Felhasználók</b>
                </div>    
                <div>${context}</div>    
            </div>
            <div style="border-top:1px solid silver">
                <b>Remaining:</b> ${res.remaining}    
            </div>
        `


        console.log(res)
    //}


})



</script>